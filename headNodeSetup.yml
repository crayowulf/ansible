---
#set up the head node in the cluster
- name: Setup head node
  hosts: headNodes
  remote_user: nvidia
  become: yes
  become_method: sudo
  become_user: root

  tasks:
    - name: make sure sshd settings are correct.
      template: src=/home/teamcrayowulf/head-config-files-temp/sshd_config dest=/etc/ssh

    - name: make sure iptables rules are in place
      template: src=/home/teamcrayowulf/head-config-files-temp/iptables.rules dest=/etc/iptables.rules

    - name: make sure iptables load script is in place.
      template: src=/home/teamcrayowulf/head-config-files-temp/iptablesload dest=/etc/network/if-pre-up.d/iptablesload

    - name: make sure iptables save script is in place.
      template: src=/home/teamcrayowulf/head-config-files-temp/iptablessave dest=/etc/network/if-post-down.d/iptablessave

